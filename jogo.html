<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Code Kids</title>
        <script src="Sprite.js"></script>
        <style>
            canvas{
                position: absolute;
                top: 0px;
                bottom: 0px;
                left: 0px;
                right: 0px;
                margin: auto;
            }
        </style>
    </head>
    <body>
        <script>
            //variavéis do jogo
            var canvas,context,LARGURA,ALTURA,frames = 0,img;
            var maxPulos = 1;

            //Modificar o chão aqui com as cores, etc.
            ground = {
                 y:550,
                 altura: 50,
                 cor: "#ffdf70",

                 desenha: function(){
                     context.fillStyle = this.cor;
                     context.fillRect(0,this.y, LARGURA, ALTURA);
                 }
            },

            personagem = {
                x: 50,
                y: 0,
                altura: 50,
                largura: 50,
                cor: "#ffe4e",
                gravidade: 1.5,
                velocidade: 0,
                ForcaDoPulo: 15,
                qntPulos: 0,
                

                desenha: function(){
                    context.drawImage(img,50,500,this.altura,this.largura);
                    //context.fillRect(this.x,this.y, this.altura, this.largura);
                    },
                
                atualiza: function(){
                    this.velocidade += this.gravidade;
                    this.y += this.velocidade;

                    if (this.y > ground.y - this.altura){
                        this.y = ground.y - this.altura;
                        this.qntPulos = 0;
                    }
                },



                pula: function(){
                    if(this.qntPulos < maxPulos){
                        this.velocidade = -this.ForcaDoPulo;
                        this.qntPulos++;
                    }
                }
            };

            function clicking(event){
                personagem.pula();
            }

            function main(){
                ALTURA = window.innerHeight;
                LARGURA = window.innerWidth;

                //Mudar tamanho da janela aqui :)

                if(LARGURA >= 500){
                    LARGURA = 600;
                    ALTURA = 600;
                }

                canvas = document.createElement("canvas");
                canvas.width = LARGURA;
                canvas.height = ALTURA;
                //Borda da janela, pegar as cores com os DS
                canvas.style.border ="1px solid #000"

                context = canvas.getContext("2d");
                document.body.appendChild(canvas);
                
                //Criei apenas um event Listener para poder testar a tela e a função de click do usuário
                document.addEventListener("mousedown", clicking);
                
                img = new Image();
                img.src = "imagens/zumbinoresized.png";

                running_on();
            }

            function running_on(){
                refreshing();
                drawing();

                window.requestAnimationFrame(running_on);
            }

            function refreshing(){
                frames++;
                personagem.atualiza();
            }

            function drawing() {
                context.fillStyle = "#50beff";
                context.fillRect(0, 0, LARGURA, ALTURA);

                //bg.desenha(0, 0);
                //spritePersonagem.desenha(50,50)

                ground.desenha();
                personagem.desenha();
            }

            //inicializando nosso jogo

            main();


        </script>
    </body>
</html>